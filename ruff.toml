#:schema https://www.schemastore.org/ruff.json
# Strict lint rules for procclean

exclude = [
  ".bzr",
  ".direnv",
  ".eggs",
  ".git",
  ".git-rewrite",
  ".hg",
  ".ipynb_checkpoints",
  ".mypy_cache",
  ".nox",
  ".pants.d",
  ".pyenv",
  ".pytest_cache",
  ".pytype",
  ".ruff_cache",
  ".svn",
  ".tox",
  ".venv",
  ".vscode",
  "__pypackages__",
  "_build",
  "buck-out",
  "build",
  "dist",
  "node_modules",
  "site-packages",
  "venv"
]
line-length = 88
indent-width = 4
target-version = "py314"

[lint]
preview = true
select = [
  "A",  # flake8-builtins (shadow detection)
  "ANN",  # flake8-annotations
  "B",  # flake8-bugbear (common bugs)
  "BLE",  # flake8-blind-except
  "C4",  # flake8-comprehensions
  "C90",  # mccabe
  "D",  # pydocstyle
  "DOC",  # pydoclint
  "DTZ",  # flake8-datetimez (timezone awareness)
  "E",  # pycodestyle - Error
  "EM",  # flake8-errmsg (exception messages)
  "ERA",  # eradicate (commented code)
  "EXE",  # flake8-executable (shebang)
  "F",  # Pyflakes
  "FLY",  # flynt
  "FURB",  # refurb
  "G",  # flake8-logging-format
  "I",  # isort
  "ICN",  # flake8-import-conventions
  "LOG",  # flake8-logging
  "N",  # pep8-naming
  "PERF",  # Perflint
  "PGH",  # pygrep-hooks
  "PIE",  # flake8-pie
  "PL",  # Pylint
  "PT",  # flake8-pytest-style
  "PTH",  # flake8-use-pathlib
  "Q",  # flake8-quotes
  "RET",  # flake8-return
  "RSE",  # flake8-raise
  "RUF",  # Ruff-specific rules
  "S",  # flake8-bandit (security)
  "SIM",  # flake8-simplify
  "SLF",  # flake8-self (private access)
  "SLOT",  # flake8-slots
  "T10",  # flake8-debugger
  "T20",  # flake8-print
  "TC",  # flake8-type-checking
  "TD",  # flake8-todos
  "TRY",  # tryceratops
  "UP",  # pyupgrade
  "W",  # pycodestyle - Warning
  "YTT",  # flake8-2020 (sys.version checks)
]
ignore = [
  "D203",  # 1 blank line required before class docstring (conflicts with D211)
  "D213",  # Multi-line docstring summary second line
  "D413",  # Missing blank line after last section of docstring
  "PTH123",  # builtin open() - simpler for some cases
  "S101",  # assert OK - not security-critical CLI tool
  "S404",  # subprocess import - legitimate use
  "S603",  # subprocess without shell check - we use psutil
  "S607",  # partial path - OK for CLI
  "TRY300",  # Return in try block
]
fixable = ["ALL"]
unfixable = []
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[lint.per-file-ignores]
"tests/**/*.py" = [
  "ANN",  # Type annotations not required in tests
  "PLC2701",  # Private name import - OK for testing internal functions
  "PLR0904",  # Too many public methods - test classes are large
  "PLR0913",  # Too many arguments - mock decorators add params
  "PLR0917",  # Too many positional arguments - same reason
  "PLR6301",  # Method could be a function, class method, or static method
  "SLF001",  # testing private members
]
"src/procclean/cli/**/*.py" = [
  "A004",  # builtin-import-shadowing - intentional rich.print override
]
"src/procclean/tui/app.py" = [
  "PLR0904",  # Too many public methods - TUI apps have many action handlers
]

[format]
preview = true
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"
docstring-code-format = true
